{"version":3,"sources":["./src/app/guards/user-list/can-leave-user-profile.guard.ts","./src/app/guards/user-list/can-proceed-to-user-profile.guard.ts","./src/app/user-profile-donation/user-profile-donation.component.ts","./src/app/user-profile-donation/user-profile-donation.component.html","./src/app/user-profile/user-profile-routing.module.ts","./src/app/user-profile/user-profile.component.ts","./src/app/user-profile/user-profile.component.html","./src/app/user-profile/user-profile.module.ts"],"names":[],"mappings":"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","file":"user-profile-user-profile-module-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { CanDeactivate } from '@angular/router';\r\nimport { CanComponentDeactivate } from '../../models/can-component-deactivate/can-component-deactivate-interface';\r\n\r\n@Injectable()\r\nexport class CanLeaveUserProfileGuard implements CanDeactivate<CanComponentDeactivate> {\r\n\tpublic canDeactivate(component: CanComponentDeactivate): boolean {\r\n\t\treturn component.canDeactivate ? component.canDeactivate() : true;\r\n\t}\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, Router } from '@angular/router';\r\nimport { selectUser } from '../../store/user-list/user-list.selectors';\r\nimport { Store } from '@ngrx/store';\r\nimport { User } from '../../models/user-list/user';\r\n\r\n@Injectable()\r\nexport class CanProceedToUserProfileGuard implements CanActivate {\r\n\r\n\tconstructor(\r\n\t\tprivate _store$: Store,\r\n\t\tprivate _router: Router\r\n\t) {\r\n\r\n\t}\r\n\r\n\tpublic canActivate(): boolean {\r\n\t\tlet currentUser: User;\r\n\t\tthis._store$.select(selectUser)\r\n\t\t\t.subscribe((user: User) => {\r\n\t\t\t\tcurrentUser = user;\r\n\t\t\t}).unsubscribe();\r\n\t\tif (currentUser) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tthis._router.navigate(['/registration', 'mode', 'login-mode']);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n","import { Component, Input } from '@angular/core';\r\nimport { Donation } from '../models/donation-list/donation';\r\n\r\n@Component({\r\n\tselector: 'app-user-profile-donation',\r\n\ttemplateUrl: './user-profile-donation.component.html',\r\n\tstyleUrls: ['./user-profile-donation.component.scss']\r\n})\r\nexport class UserProfileDonationComponent {\r\n\r\n\t@Input()\r\n\tpublic donation: Donation;\r\n\r\n\t// tslint:disable-next-line: no-empty\r\n\tconstructor() { }\r\n\r\n}\r\n","<div class=\"-app-user-profile-donation\">\r\n    <div class=\"-app-user-profile-donation__item\">\r\n        <div class=\"-app-user-profile-donation__item-title\">\r\n            tree name:            \r\n        </div>\r\n        <div class=\"-app-user-profile-donation__item-info\">\r\n            {{donation.treeDonation.tree.name}}\r\n        </div>\r\n    </div>\r\n    <div class=\"-app-user-profile-donation__item\">\r\n        <div class=\"-app-user-profile-donation__item-title\">\r\n            tree type:            \r\n        </div>\r\n        <div class=\"-app-user-profile-donation__item-info\">\r\n            {{donation.treeDonation.tree.type}}\r\n        </div>\r\n    </div>\r\n    <div class=\"-app-user-profile-donation__item\">\r\n        <div class=\"-app-user-profile-donation__item-title\">\r\n            tree number:            \r\n        </div>\r\n        <div class=\"-app-user-profile-donation__item-info\">\r\n            {{donation.treeDonation.amount}}\r\n        </div>\r\n    </div>\r\n    <div class=\"-app-user-profile-donation__item\">\r\n        <div class=\"-app-user-profile-donation__item-title\">\r\n            cost:            \r\n        </div>\r\n        <div class=\"-app-user-profile-donation__item-info\">\r\n            {{donation.treeDonation.amount}}\r\n        </div>\r\n    </div>\r\n    <div class=\"-app-user-profile-donation__item\">\r\n        <div class=\"-app-user-profile-donation__item-title\">\r\n            date:            \r\n        </div>\r\n        <div class=\"-app-user-profile-donation__item-info\">\r\n            {{donation.date | date}}\r\n        </div>\r\n    </div>\r\n</div>","import { RouterModule, Routes } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\nimport { UserProfileComponent } from './user-profile.component';\r\nimport { CanProceedToUserProfileGuard } from '../guards/user-list/can-proceed-to-user-profile.guard';\r\nimport { CanLeaveUserProfileGuard } from '../guards/user-list/can-leave-user-profile.guard';\r\n\r\nconst routes: Routes = [\r\n\t{\r\n\t\tpath: '',\r\n\t\tcomponent: UserProfileComponent,\r\n\t\tcanActivate: [CanProceedToUserProfileGuard],\r\n\t\tcanDeactivate: [CanLeaveUserProfileGuard]\r\n\t}\r\n];\r\n\r\n@NgModule({\r\n\timports: [RouterModule.forChild(routes)],\r\n\texports: [RouterModule]\r\n})\r\nexport class UserProfileRoutingModule {\r\n\r\n}\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport { selectUser } from '../store/user-list/user-list.selectors';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { Subject } from 'rxjs';\r\nimport { User } from '../models/user-list/user';\r\nimport { Router } from '@angular/router';\r\nimport { FacadeServiceUserList } from '../store/user-list/user-list.facade';\r\nimport { FormGroup, Validators, FormControl } from '@angular/forms';\r\nimport { Donation } from '../models/donation-list/donation';\r\nimport { selectUserDonationList, selectIsInitedUserDonationList } from '../store/donation-list/donation-list.selectors';\r\nimport { FacadeServiceDonationList } from '../store/donation-list/donation-list.facade';\r\n\r\n@Component({\r\n\tselector: 'app-user-profile',\r\n\ttemplateUrl: './user-profile.component.html',\r\n\tstyleUrls: ['./user-profile.component.scss']\r\n})\r\nexport class UserProfileComponent implements OnInit, OnDestroy {\r\n\r\n\tpublic static currentUserMedicalPoints: number;\r\n\r\n\tprivate _destroySubject$: Subject<boolean> = new Subject();\r\n\r\n\tprivate _isGettedMedicalInsurance: boolean;\r\n\r\n\tpublic user: User;\r\n\r\n\tpublic userDonationList: Donation[];\r\n\tpublic isInitedUserDonationList: boolean;\r\n\r\n\tpublic myFormNewImage: FormGroup;\r\n\tpublic imageMode: boolean;\r\n\r\n\tpublic myFormApplyInsurance: FormGroup;\r\n\tpublic medicalFormMode: boolean;\r\n\r\n\tconstructor(\r\n\t\tprivate _store$: Store,\r\n\t\tprivate _router: Router,\r\n\t\tprivate _facadeUserListService: FacadeServiceUserList,\r\n\t\tprivate _facadeDonationListService: FacadeServiceDonationList\r\n\t) {\r\n\t\tthis.initImageForm();\r\n\t\tthis.initApplyInsuranceForm();\r\n\t}\r\n\r\n\tprivate initImageForm(): void {\r\n\t\tthis.myFormNewImage = new FormGroup({\r\n\t\t\tuserNewImage: new FormControl('', Validators.required)\r\n\t\t});\r\n\t}\r\n\r\n\tprivate initApplyInsuranceForm(): void {\r\n\t\tthis.myFormApplyInsurance = new FormGroup({\r\n\t\t\tuserMedicalPoints: new FormControl('', [Validators.required, this.medicalPointsValidator]),\r\n\t\t\tuserMessage: new FormControl('', Validators.required)\r\n\t\t});\r\n\t}\r\n\r\n\tprivate medicalPointsValidator(control: FormControl): { [s: string]: boolean } {\r\n\t\tconst medicalPointsInputControlName: string = 'userMedicalPoints';\r\n\t\tif (!isNaN(control.value) && control.value > 0 && Number(control.value) <= UserProfileComponent.currentUserMedicalPoints) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn { medicalPointsInputControlName: true };\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate isAnyValuesEnteredInMedicalInsuranceForm(): boolean {\r\n\t\tif (\r\n\t\t\tBoolean(this.myFormApplyInsurance.controls.userMedicalPoints.value)\r\n\t\t\t|| Boolean(this.myFormApplyInsurance.controls.userMessage.value)\r\n\t\t) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic ngOnInit(): void {\r\n\t\tthis._store$.select(selectUser)\r\n\t\t\t.pipe(\r\n\t\t\t\ttakeUntil(this._destroySubject$)\r\n\t\t\t).subscribe((user: User) => {\r\n\t\t\t\tif (Boolean(user)) {\r\n\t\t\t\t\tUserProfileComponent.currentUserMedicalPoints = user.clone().medicalPoints;\r\n\t\t\t\t\tthis.user = user;\r\n\t\t\t\t\tthis._facadeDonationListService.initUserDonationList(this.user.id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tthis._store$.select(selectUserDonationList)\r\n\t\t\t.pipe(\r\n\t\t\t\ttakeUntil(this._destroySubject$)\r\n\t\t\t).subscribe((userDonationList: Donation[]) => {\r\n\t\t\t\tthis.userDonationList = userDonationList;\r\n\t\t\t\tthis._facadeDonationListService.initUserDonationListSuccess();\r\n\t\t\t});\r\n\t\tthis._store$.select(selectIsInitedUserDonationList)\r\n\t\t\t.pipe(\r\n\t\t\t\ttakeUntil(this._destroySubject$)\r\n\t\t\t).subscribe((isInitedUserDonationList: boolean) => {\r\n\t\t\t\tthis.isInitedUserDonationList = isInitedUserDonationList;\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic ngOnDestroy(): void {\r\n\t\tthis._destroySubject$.next(true);\r\n\t\tthis._destroySubject$.complete();\r\n\t}\r\n\r\n\tpublic toggleImageMode(): void {\r\n\t\tthis.imageMode = !this.imageMode;\r\n\t}\r\n\r\n\tpublic changeImage(): void {\r\n\t\tconst newImage: string = this.myFormNewImage.controls.userNewImage.value;\r\n\t\tthis._facadeUserListService.changeCurrentUserImage(newImage);\r\n\t\tthis.toggleImageMode();\r\n\t}\r\n\r\n\tpublic startDonation(): void {\r\n\t\tthis._router.navigate(['/donation']);\r\n\t}\r\n\r\n\tpublic toggleFillMedicalForm(): void {\r\n\t\tthis.medicalFormMode = !this.medicalFormMode;\r\n\t}\r\n\r\n\tpublic applyInsurance(): void {\r\n\t\tthis._isGettedMedicalInsurance = true;\r\n\r\n\t\tif (this.myFormApplyInsurance.invalid) {\r\n\t\t\tthis.myFormApplyInsurance.controls.userMedicalPoints.markAsTouched();\r\n\t\t\tthis.myFormApplyInsurance.controls.userMessage.markAsTouched();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst numberOfGetMedicalPoints: number = Number(this.myFormApplyInsurance.controls.userMedicalPoints.value);\r\n\t\tthis._facadeUserListService.pickUpPointsFromUser(this.user.id, numberOfGetMedicalPoints);\r\n\t\tif (this.medicalFormMode) {\r\n\t\t\tthis.toggleFillMedicalForm();\r\n\t\t}\r\n\t\tthis.initApplyInsuranceForm();\r\n\t}\r\n\r\n\tpublic canDeactivate(): boolean {\r\n\t\tconst deactivateQuestion: string = 'You filled in the form fields but did not get insurance. Are you sure that you want to go from this page?';\r\n\t\treturn (!this._isGettedMedicalInsurance && this.isAnyValuesEnteredInMedicalInsuranceForm())\r\n\t\t\t? confirm(deactivateQuestion)\r\n\t\t\t: true;\r\n\t}\r\n\r\n}\r\n","<div \r\n    *ngIf=\"!user\"\r\n    class=\"-app-user-profile\">\r\n</div>\r\n<div  *ngIf=\"user\"\r\n    class=\"-app-user-profile\">\r\n    <div \r\n        class=\"-app-user-profile__image-container\"\r\n        (click)=\"toggleImageMode()\">\r\n        <div *ngTemplateOutlet=\"user.profileImage ? profileImage : defaultProfileImage\"></div>\r\n        <ng-template #profileImage>\r\n            <img class=\"-app-user-profile__image\" src=\"{{ user.profileImage }}\">\r\n        </ng-template>\r\n        <ng-template #defaultProfileImage>\r\n            <div class=\"-app-user-profile__image -app-user-profile__image_default\">\r\n                no image\r\n            </div>\r\n        </ng-template>\r\n    </div>\r\n    <div \r\n        class=\"-app-user-profile__donation-list\"\r\n        [class.-app-user-profile__donation-list_image-mode]=\"imageMode\">\r\n        <h2 class=\"-app-user-profile__donation-list-title\">\r\n            donations\r\n        </h2>\r\n        <div\r\n            class=\"-app-user-profile__donation-list-wrapper\"\r\n            *ngIf=\"isInitedUserDonationList\">\r\n            <app-user-profile-donation\r\n            class=\"-app-user-profile__current-donation\"\r\n            *ngFor=\"let donation of userDonationList\"\r\n            [donation]=\"donation\">\r\n            </app-user-profile-donation>\r\n        </div>\r\n        <div \r\n            class=\"-app-user-profile__start-donation\"\r\n            *ngIf=\"!isInitedUserDonationList\"\r\n            [class.-app-user-profile__start-donation_image-mode]=\"imageMode\">\r\n            <h3 class=\"-app-user-profile__start-donation-title\">           \r\n                you have not donated ever\r\n            </h3>\r\n            <h3 class=\"-app-user-profile__start-donation-sub-title\">\r\n                start your donation history by clicking on the button below\r\n            </h3>\r\n            <button \r\n                class=\"-app-user-profile__start-donation-button\"\r\n                (click)=\"startDonation()\">\r\n                start\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class=\"-app-user-profile__info-list-wrapper\">\r\n        <div \r\n            class=\"-app-user-profile__info-list\"\r\n            [class.-app-user-profile__info-list_medical-mode]=\"medicalFormMode\">\r\n            <div class=\"-app-user-profile__info-item\">\r\n                {{ user.name }}\r\n            </div>\r\n            <div class=\"-app-user-profile__info-item\">\r\n                {{ user.surName }}\r\n            </div>\r\n            <div class=\"-app-user-profile__info-item\">\r\n                {{ user.email }}\r\n            </div>\r\n            <div class=\"-app-user-profile__info-item\">\r\n                Age: {{ user.age }}\r\n            </div>\r\n            <div class=\"-app-user-profile__info-item\">\r\n                Join our project: {{ user.date | date }}\r\n            </div>\r\n            <div \r\n                class=\"-app-user-profile__info-item\"\r\n                *ngIf=\"user.country\">\r\n                Country: {{ user.country.name }}\r\n            </div>\r\n            <div \r\n                class=\"-app-user-profile__info-item\"\r\n                title=\"1 medical point = 1 donation $\">\r\n                Medical Points: {{ user.medicalPoints }}\r\n            </div>\r\n            <button\r\n                class=\"-app-user-profile__info-list-button\"\r\n                title=\"get medical insurance\"\r\n                [disabled]=\"!user.medicalPoints\"\r\n                (click)=\"toggleFillMedicalForm()\">\r\n            </button>\r\n        </div>\r\n        <form \r\n            class=\"-app-user-profile__info-list-form -app-user-profile__info-list-form_medical\"\r\n            [class.-app-user-profile__info-list-form_medical-mode]=\"medicalFormMode\"\r\n            [formGroup]=\"myFormApplyInsurance\"\r\n            (ngSubmit)=\"applyInsurance()\">\r\n            <button \r\n                class=\"-app-user-profile__info-list-form-back\"\r\n                (click)=\"toggleFillMedicalForm()\">\r\n            </button>\r\n            <h2 class=\"-app-user-profile__info-list-form-title\">medical insurance</h2>\r\n            <div class=\"-app-user-profile__info-list-form-item\">\r\n                <input \r\n                    class=\"-app-user-profile__info-list-form-item-input -app-user-profile__info-list-form-item-input_name\"\r\n                    name=\"medicalPoints\"\r\n                    type=\"text\"\r\n                    formControlName=\"userMedicalPoints\"\r\n                    autocomplete=\"off\">\r\n                <span class=\"-app-user-profile__info-list-form-item-line\"></span>\r\n                <label \r\n                    class=\"-app-user-profile__info-list-form-item-label\"\r\n                    [class.-app-user-profile__info-list-form-item-label_invisible]=\"myFormApplyInsurance.controls['userMedicalPoints'].dirty\">\r\n                    points number\r\n                </label>\r\n                <span \r\n                    class=\"-app-user-profile__info-list-form-warning -app-user-profile__info-list-form-warning_item\" \r\n                    [class.-app-user-profile__info-list-form-warning_item-invalid]=\"myFormApplyInsurance.controls['userMedicalPoints'].touched\r\n                        && myFormApplyInsurance.controls['userMedicalPoints'].invalid\"\r\n                    title=\"Enter only values ​​within your medical points\">\r\n                </span>\r\n            </div>\r\n            <div class=\"-app-user-profile__info-list-form-message\">\r\n                <textarea class=\"-app-user-profile__info-list-form-message-textarea\"\r\n                    placeholder=\"Write your message\"\r\n                    formControlName=\"userMessage\"\r\n                    title=\"Enter only values ​​within your medical points\"></textarea>\r\n                    <span \r\n                    class=\"-app-user-profile__info-list-form-warning -app-user-profile__info-list-form-warning_message\"\r\n                    [class.-app-user-profile__info-list-form-warning_message-invalid]=\"myFormApplyInsurance.controls['userMessage'].touched\r\n                        && myFormApplyInsurance.controls['userMessage'].invalid\"\r\n                    title=\"Enter some message to us\">\r\n                    </span>\r\n            </div>\r\n            <button \r\n                class=\"-app-user-profile__info-list-form-button\"\r\n                type=\"submit\"\r\n                [disabled]=\"myFormApplyInsurance.controls['userMedicalPoints'].invalid \r\n                    || myFormApplyInsurance.controls['userMessage'].invalid\">get</button>\r\n        </form>\r\n    </div>\r\n    <div \r\n        class=\"-app-user-profile__change\"\r\n        [class.-app-user-profile__change_image-mode]=\"imageMode\">\r\n        <div \r\n            class=\"-app-user-profile__change-title\"\r\n            [class.-app-user-profile__change-title_image-mode]=\"imageMode\">\r\n            Enter the url of any picture, which you want to see in your profile\r\n        </div>\r\n        <img \r\n            class=\"-app-user-profile__change-image\"\r\n            [class.-app-user-profile__change-image_image-mode]=\"imageMode\"\r\n            src=\"{{myFormNewImage.controls['userNewImage'].value}}\">\r\n        <form \r\n            class=\"-app-user-profile__change-form\"\r\n            [class.-app-user-profile__change-form_image-mode]=\"imageMode\"\r\n            [formGroup]=\"myFormNewImage\"\r\n            (ngSubmit)=\"changeImage()\">\r\n            <input \r\n                class=\"-app-user-profile__change-input\" \r\n                [class.-app-user-profile__change-input_image-mode]=\"imageMode\"\r\n                type=\"text\"\r\n                name=\"imageUrl\"\r\n                placeholder=\"Enter url of the picture\"\r\n                formControlName=\"userNewImage\"\r\n                autocomplete=\"off\">\r\n            <span \r\n                class=\"-app-user-profile__change-input-line\" \r\n                [class.-app-user-profile__change-input-line_image-mode]=\"imageMode\">\r\n            </span>\r\n            <button\r\n                class=\"-app-user-profile__change-switch-button\" \r\n                [class.-app-user-profile__change-switch-button_image-mode]=\"imageMode\"\r\n                type=\"submit\">\r\n                Change\r\n            </button>\r\n        </form>\r\n        <button \r\n            class=\"-app-user-profile__change-return-button\"\r\n            [class.-app-user-profile__change-return-button_image-mode]=\"imageMode\"\r\n            (click)=\"toggleImageMode()\">\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { UserProfileComponent } from './user-profile.component';\r\nimport { UserProfileDonationComponent } from '../user-profile-donation/user-profile-donation.component';\r\nimport { UserProfileRoutingModule } from './user-profile-routing.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CanProceedToUserProfileGuard } from '../guards/user-list/can-proceed-to-user-profile.guard';\r\nimport { CanLeaveUserProfileGuard } from '../guards/user-list/can-leave-user-profile.guard';\r\n\r\n@NgModule({\r\n\tdeclarations: [\r\n\t\tUserProfileComponent,\r\n\t\tUserProfileDonationComponent\r\n\t],\r\n\timports: [\r\n\t\tUserProfileRoutingModule,\r\n\t\tCommonModule,\r\n\t\tFormsModule,\r\n\t\tReactiveFormsModule,\r\n\t],\r\n\tproviders: [\r\n\t\tCanProceedToUserProfileGuard,\r\n\t\tCanLeaveUserProfileGuard\r\n\t],\r\n\tbootstrap: [UserProfileComponent]\r\n})\r\nexport class UserProfileModule {\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}