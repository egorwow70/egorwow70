{"version":3,"sources":["./src/app/guards/user-list/can-leave-user-profile.guard.ts","./src/app/guards/user-list/can-proceed-to-user-profile.guard.ts","./src/app/user-profile-donation/user-profile-donation.component.ts","./src/app/user-profile-donation/user-profile-donation.component.html","./src/app/user-profile/user-profile-routing.module.ts","./src/app/user-profile/user-profile.component.ts","./src/app/user-profile/user-profile.component.html","./src/app/user-profile/user-profile.module.ts"],"names":[],"mappings":"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","file":"user-profile-user-profile-module-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanDeactivate } from '@angular/router';\nimport { CanComponentDeactivate } from '../../models/can-component-deactivate/can-component-deactivate-interface';\n\n@Injectable()\nexport class CanLeaveUserProfileGuard implements CanDeactivate<CanComponentDeactivate> {\n\tpublic canDeactivate(component: CanComponentDeactivate): boolean {\n\t\treturn component.canDeactivate ? component.canDeactivate() : true;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { selectUser } from '../../store/user-list/user-list.selectors';\nimport { Store } from '@ngrx/store';\nimport { User } from '../../models/user-list/user';\n\n@Injectable()\nexport class CanProceedToUserProfileGuard implements CanActivate {\n\n\tconstructor(\n\t\tprivate _store$: Store,\n\t\tprivate _router: Router\n\t) {\n\n\t}\n\n\tpublic canActivate(): boolean {\n\t\tlet currentUser: User;\n\t\tthis._store$.select(selectUser)\n\t\t\t.subscribe((user: User) => {\n\t\t\t\tcurrentUser = user;\n\t\t\t}).unsubscribe();\n\t\tif (currentUser) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis._router.navigate(['/registration', 'mode', 'login-mode']);\n\t\t\treturn false;\n\t\t}\n\t}\n}\n","import { Component, Input } from '@angular/core';\nimport { Donation } from '../models/donation-list/donation';\n\n@Component({\n\tselector: 'app-user-profile-donation',\n\ttemplateUrl: './user-profile-donation.component.html',\n\tstyleUrls: ['./user-profile-donation.component.scss']\n})\nexport class UserProfileDonationComponent {\n\n\t@Input()\n\tpublic donation: Donation;\n\n\t// tslint:disable-next-line: no-empty\n\tconstructor() { }\n\n}\n","<div class=\"-app-user-profile-donation\">\n    <div class=\"-app-user-profile-donation__item\">\n        <div class=\"-app-user-profile-donation__item-title\">\n            tree name:            \n        </div>\n        <div class=\"-app-user-profile-donation__item-info\">\n            {{donation.treeDonation.tree.name}}\n        </div>\n    </div>\n    <div class=\"-app-user-profile-donation__item\">\n        <div class=\"-app-user-profile-donation__item-title\">\n            tree type:            \n        </div>\n        <div class=\"-app-user-profile-donation__item-info\">\n            {{donation.treeDonation.tree.type}}\n        </div>\n    </div>\n    <div class=\"-app-user-profile-donation__item\">\n        <div class=\"-app-user-profile-donation__item-title\">\n            tree number:            \n        </div>\n        <div class=\"-app-user-profile-donation__item-info\">\n            {{donation.treeDonation.amount}}\n        </div>\n    </div>\n    <div class=\"-app-user-profile-donation__item\">\n        <div class=\"-app-user-profile-donation__item-title\">\n            cost:            \n        </div>\n        <div class=\"-app-user-profile-donation__item-info\">\n            {{donation.treeDonation.amount}}\n        </div>\n    </div>\n    <div class=\"-app-user-profile-donation__item\">\n        <div class=\"-app-user-profile-donation__item-title\">\n            date:            \n        </div>\n        <div class=\"-app-user-profile-donation__item-info\">\n            {{donation.date | date}}\n        </div>\n    </div>\n</div>","import { RouterModule, Routes } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\nimport { UserProfileComponent } from './user-profile.component';\r\nimport { CanProceedToUserProfileGuard } from '../guards/user-list/can-proceed-to-user-profile.guard';\r\nimport { CanLeaveUserProfileGuard } from '../guards/user-list/can-leave-user-profile.guard';\r\n\r\nconst routes: Routes = [\r\n\t{\r\n\t\tpath: '',\r\n\t\tcomponent: UserProfileComponent,\r\n\t\tcanActivate: [CanProceedToUserProfileGuard],\r\n\t\tcanDeactivate: [CanLeaveUserProfileGuard]\r\n\t}\r\n];\r\n\r\n@NgModule({\r\n\timports: [RouterModule.forChild(routes)],\r\n\texports: [RouterModule]\r\n})\r\nexport class UserProfileRoutingModule {\r\n\r\n}\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { selectUser } from '../store/user-list/user-list.selectors';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { User } from '../models/user-list/user';\nimport { Router } from '@angular/router';\nimport { FacadeServiceUserList } from '../store/user-list/user-list.facade';\nimport { FormGroup, Validators, FormControl } from '@angular/forms';\nimport { Donation } from '../models/donation-list/donation';\nimport { selectUserDonationList, selectIsInitedUserDonationList } from '../store/donation-list/donation-list.selectors';\nimport { FacadeServiceDonationList } from '../store/donation-list/donation-list.facade';\n\n@Component({\n\tselector: 'app-user-profile',\n\ttemplateUrl: './user-profile.component.html',\n\tstyleUrls: ['./user-profile.component.scss']\n})\nexport class UserProfileComponent implements OnInit, OnDestroy {\n\n\tpublic static currentUserMedicalPoints: number;\n\n\tprivate _destroySubject$: Subject<boolean> = new Subject();\n\n\tprivate _isGettedMedicalInsurance: boolean;\n\n\tpublic user: User;\n\n\tpublic userDonationList: Donation[];\n\tpublic isInitedUserDonationList: boolean;\n\n\tpublic myFormNewImage: FormGroup;\n\tpublic imageMode: boolean;\n\n\tpublic myFormApplyInsurance: FormGroup;\n\tpublic medicalFormMode: boolean;\n\n\tconstructor(\n\t\tprivate _store$: Store,\n\t\tprivate _router: Router,\n\t\tprivate _facadeUserListService: FacadeServiceUserList,\n\t\tprivate _facadeDonationListService: FacadeServiceDonationList\n\t) {\n\t\tthis.initImageForm();\n\t\tthis.initApplyInsuranceForm();\n\t}\n\n\tprivate initImageForm(): void {\n\t\tthis.myFormNewImage = new FormGroup({\n\t\t\tuserNewImage: new FormControl('', Validators.required)\n\t\t});\n\t}\n\n\tprivate initApplyInsuranceForm(): void {\n\t\tthis.myFormApplyInsurance = new FormGroup({\n\t\t\tuserMedicalPoints: new FormControl('', [Validators.required, this.medicalPointsValidator]),\n\t\t\tuserMessage: new FormControl('', Validators.required)\n\t\t});\n\t}\n\n\tprivate medicalPointsValidator(control: FormControl): { [s: string]: boolean } {\n\t\tconst medicalPointsInputControlName: string = 'userMedicalPoints';\n\t\tif (!isNaN(control.value) && control.value > 0 && Number(control.value) <= UserProfileComponent.currentUserMedicalPoints) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn { medicalPointsInputControlName: true };\n\t\t}\n\n\t}\n\n\tprivate isAnyValuesEnteredInMedicalInsuranceForm(): boolean {\n\t\tif (\n\t\t\tBoolean(this.myFormApplyInsurance.controls.userMedicalPoints.value)\n\t\t\t|| Boolean(this.myFormApplyInsurance.controls.userMessage.value)\n\t\t) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic ngOnInit(): void {\n\t\tthis._store$.select(selectUser)\n\t\t\t.pipe(\n\t\t\t\ttakeUntil(this._destroySubject$)\n\t\t\t).subscribe((user: User) => {\n\t\t\t\tif (Boolean(user)) {\n\t\t\t\t\tUserProfileComponent.currentUserMedicalPoints = user.clone().medicalPoints;\n\t\t\t\t\tthis.user = user;\n\t\t\t\t\tthis._facadeDonationListService.initUserDonationList(this.user.id);\n\t\t\t\t}\n\t\t\t});\n\t\tthis._store$.select(selectUserDonationList)\n\t\t\t.pipe(\n\t\t\t\ttakeUntil(this._destroySubject$)\n\t\t\t).subscribe((userDonationList: Donation[]) => {\n\t\t\t\tthis.userDonationList = userDonationList;\n\t\t\t\tthis._facadeDonationListService.initUserDonationListSuccess();\n\t\t\t});\n\t\tthis._store$.select(selectIsInitedUserDonationList)\n\t\t\t.pipe(\n\t\t\t\ttakeUntil(this._destroySubject$)\n\t\t\t).subscribe((isInitedUserDonationList: boolean) => {\n\t\t\t\tthis.isInitedUserDonationList = isInitedUserDonationList;\n\t\t\t});\n\t}\n\n\tpublic ngOnDestroy(): void {\n\t\tthis._destroySubject$.next(true);\n\t\tthis._destroySubject$.complete();\n\t}\n\n\tpublic toggleImageMode(): void {\n\t\tthis.imageMode = !this.imageMode;\n\t}\n\n\tpublic changeImage(): void {\n\t\tconst newImage: string = this.myFormNewImage.controls.userNewImage.value;\n\t\tthis._facadeUserListService.changeCurrentUserImage(newImage);\n\t\tthis.toggleImageMode();\n\t}\n\n\tpublic startDonation(): void {\n\t\tthis._router.navigate(['/donation']);\n\t}\n\n\tpublic toggleFillMedicalForm(): void {\n\t\tthis.medicalFormMode = !this.medicalFormMode;\n\t}\n\n\tpublic applyInsurance(): void {\n\t\tthis._isGettedMedicalInsurance = true;\n\n\t\tif (this.myFormApplyInsurance.invalid) {\n\t\t\tthis.myFormApplyInsurance.controls.userMedicalPoints.markAsTouched();\n\t\t\tthis.myFormApplyInsurance.controls.userMessage.markAsTouched();\n\t\t\treturn;\n\t\t}\n\t\tconst numberOfGetMedicalPoints: number = Number(this.myFormApplyInsurance.controls.userMedicalPoints.value);\n\t\tthis._facadeUserListService.pickUpPointsFromUser(this.user.id, numberOfGetMedicalPoints);\n\t\tif (this.medicalFormMode) {\n\t\t\tthis.toggleFillMedicalForm();\n\t\t}\n\t\tthis.initApplyInsuranceForm();\n\t}\n\n\tpublic canDeactivate(): boolean {\n\t\tconst deactivateQuestion: string = 'You filled in the form fields but did not get insurance. Are you sure that you want to go from this page?';\n\t\treturn (!this._isGettedMedicalInsurance && this.isAnyValuesEnteredInMedicalInsuranceForm())\n\t\t\t? confirm(deactivateQuestion)\n\t\t\t: true;\n\t}\n\n}\n","<div \n    *ngIf=\"!user\"\n    class=\"-app-user-profile\">\n</div>\n<div  *ngIf=\"user\"\n    class=\"-app-user-profile\">\n    <div \n        class=\"-app-user-profile__image-container\"\n        (click)=\"toggleImageMode()\">\n        <div *ngTemplateOutlet=\"user.profileImage ? profileImage : defaultProfileImage\"></div>\n        <ng-template #profileImage>\n            <img class=\"-app-user-profile__image\" src=\"{{ user.profileImage }}\">\n        </ng-template>\n        <ng-template #defaultProfileImage>\n            <div class=\"-app-user-profile__image -app-user-profile__image_default\">\n                no image\n            </div>\n        </ng-template>\n    </div>\n    <div \n        class=\"-app-user-profile__donation-list\"\n        [class.-app-user-profile__donation-list_image-mode]=\"imageMode\">\n        <h2 class=\"-app-user-profile__donation-list-title\">\n            donations\n        </h2>\n        <div\n            class=\"-app-user-profile__donation-list-wrapper\"\n            *ngIf=\"isInitedUserDonationList\">\n            <app-user-profile-donation\n            class=\"-app-user-profile__current-donation\"\n            *ngFor=\"let donation of userDonationList\"\n            [donation]=\"donation\">\n            </app-user-profile-donation>\n        </div>\n        <div \n            class=\"-app-user-profile__start-donation\"\n            *ngIf=\"!isInitedUserDonationList\"\n            [class.-app-user-profile__start-donation_image-mode]=\"imageMode\">\n            <h3 class=\"-app-user-profile__start-donation-title\">           \n                you have not donated ever\n            </h3>\n            <h3 class=\"-app-user-profile__start-donation-sub-title\">\n                start your donation history by clicking on the button below\n            </h3>\n            <button \n                class=\"-app-user-profile__start-donation-button\"\n                (click)=\"startDonation()\">\n                start\n            </button>\n        </div>\n    </div>\n    <div class=\"-app-user-profile__info-list-wrapper\">\n        <div \n            class=\"-app-user-profile__info-list\"\n            [class.-app-user-profile__info-list_medical-mode]=\"medicalFormMode\">\n            <div class=\"-app-user-profile__info-item\">\n                {{ user.name }}\n            </div>\n            <div class=\"-app-user-profile__info-item\">\n                {{ user.surName }}\n            </div>\n            <div class=\"-app-user-profile__info-item\">\n                {{ user.email }}\n            </div>\n            <div class=\"-app-user-profile__info-item\">\n                Age: {{ user.age }}\n            </div>\n            <div class=\"-app-user-profile__info-item\">\n                Join our project: {{ user.date | date }}\n            </div>\n            <div \n                class=\"-app-user-profile__info-item\"\n                *ngIf=\"user.country\">\n                Country: {{ user.country.name }}\n            </div>\n            <div \n                class=\"-app-user-profile__info-item\"\n                title=\"1 medical point = 1 donation $\">\n                Medical Points: {{ user.medicalPoints }}\n            </div>\n            <button\n                class=\"-app-user-profile__info-list-button\"\n                title=\"get medical insurance\"\n                [disabled]=\"!user.medicalPoints\"\n                (click)=\"toggleFillMedicalForm()\">\n            </button>\n        </div>\n        <form \n            class=\"-app-user-profile__info-list-form -app-user-profile__info-list-form_medical\"\n            [class.-app-user-profile__info-list-form_medical-mode]=\"medicalFormMode\"\n            [formGroup]=\"myFormApplyInsurance\"\n            (ngSubmit)=\"applyInsurance()\">\n            <button \n                class=\"-app-user-profile__info-list-form-back\"\n                (click)=\"toggleFillMedicalForm()\">\n            </button>\n            <h2 class=\"-app-user-profile__info-list-form-title\">medical insurance</h2>\n            <div class=\"-app-user-profile__info-list-form-item\">\n                <input \n                    class=\"-app-user-profile__info-list-form-item-input -app-user-profile__info-list-form-item-input_name\"\n                    name=\"medicalPoints\"\n                    type=\"text\"\n                    formControlName=\"userMedicalPoints\"\n                    autocomplete=\"off\">\n                <span class=\"-app-user-profile__info-list-form-item-line\"></span>\n                <label \n                    class=\"-app-user-profile__info-list-form-item-label\"\n                    [class.-app-user-profile__info-list-form-item-label_invisible]=\"myFormApplyInsurance.controls['userMedicalPoints'].dirty\">\n                    points number\n                </label>\n                <span \n                    class=\"-app-user-profile__info-list-form-warning -app-user-profile__info-list-form-warning_item\" \n                    [class.-app-user-profile__info-list-form-warning_item-invalid]=\"myFormApplyInsurance.controls['userMedicalPoints'].touched\n                        && myFormApplyInsurance.controls['userMedicalPoints'].invalid\"\n                    title=\"Enter only values ​​within your medical points\">\n                </span>\n            </div>\n            <div class=\"-app-user-profile__info-list-form-message\">\n                <textarea class=\"-app-user-profile__info-list-form-message-textarea\"\n                    placeholder=\"Write your message\"\n                    formControlName=\"userMessage\"\n                    title=\"Enter only values ​​within your medical points\"></textarea>\n                    <span \n                    class=\"-app-user-profile__info-list-form-warning -app-user-profile__info-list-form-warning_message\"\n                    [class.-app-user-profile__info-list-form-warning_message-invalid]=\"myFormApplyInsurance.controls['userMessage'].touched\n                        && myFormApplyInsurance.controls['userMessage'].invalid\"\n                    title=\"Enter some message to us\">\n                    </span>\n            </div>\n            <button \n                class=\"-app-user-profile__info-list-form-button\"\n                type=\"submit\"\n                [disabled]=\"myFormApplyInsurance.controls['userMedicalPoints'].invalid \n                    || myFormApplyInsurance.controls['userMessage'].invalid\">get</button>\n        </form>\n    </div>\n    <div \n        class=\"-app-user-profile__change\"\n        [class.-app-user-profile__change_image-mode]=\"imageMode\">\n        <div \n            class=\"-app-user-profile__change-title\"\n            [class.-app-user-profile__change-title_image-mode]=\"imageMode\">\n            Enter the url of any picture, which you want to see in your profile\n        </div>\n        <img \n            class=\"-app-user-profile__change-image\"\n            [class.-app-user-profile__change-image_image-mode]=\"imageMode\"\n            src=\"{{myFormNewImage.controls['userNewImage'].value}}\">\n        <form \n            class=\"-app-user-profile__change-form\"\n            [class.-app-user-profile__change-form_image-mode]=\"imageMode\"\n            [formGroup]=\"myFormNewImage\"\n            (ngSubmit)=\"changeImage()\">\n            <input \n                class=\"-app-user-profile__change-input\" \n                [class.-app-user-profile__change-input_image-mode]=\"imageMode\"\n                type=\"text\"\n                name=\"imageUrl\"\n                placeholder=\"Enter url of the picture\"\n                formControlName=\"userNewImage\"\n                autocomplete=\"off\">\n            <span \n                class=\"-app-user-profile__change-input-line\" \n                [class.-app-user-profile__change-input-line_image-mode]=\"imageMode\">\n            </span>\n            <button\n                class=\"-app-user-profile__change-switch-button\" \n                [class.-app-user-profile__change-switch-button_image-mode]=\"imageMode\"\n                type=\"submit\">\n                Change\n            </button>\n        </form>\n        <button \n            class=\"-app-user-profile__change-return-button\"\n            [class.-app-user-profile__change-return-button_image-mode]=\"imageMode\"\n            (click)=\"toggleImageMode()\">\n        </button>\n    </div>\n</div>\n\n\n\n\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { UserProfileComponent } from './user-profile.component';\r\nimport { UserProfileDonationComponent } from '../user-profile-donation/user-profile-donation.component';\r\nimport { UserProfileRoutingModule } from './user-profile-routing.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CanProceedToUserProfileGuard } from '../guards/user-list/can-proceed-to-user-profile.guard';\r\nimport { CanLeaveUserProfileGuard } from '../guards/user-list/can-leave-user-profile.guard';\r\n\r\n@NgModule({\r\n\tdeclarations: [\r\n\t\tUserProfileComponent,\r\n\t\tUserProfileDonationComponent\r\n\t],\r\n\timports: [\r\n\t\tUserProfileRoutingModule,\r\n\t\tCommonModule,\r\n\t\tFormsModule,\r\n\t\tReactiveFormsModule,\r\n\t],\r\n\tproviders: [\r\n\t\tCanProceedToUserProfileGuard,\r\n\t\tCanLeaveUserProfileGuard\r\n\t],\r\n\tbootstrap: [UserProfileComponent]\r\n})\r\nexport class UserProfileModule {\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}